<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Slayer</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #1a1a2e;
            font-family: Arial, sans-serif;
            color: #fff;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }
        #gameCanvas {
            border: 3px solid #00ff88;
            background: #2a2a4e;
            max-width: 100%;
            height: auto;
        }
        #ui {
            margin-top: 15px;
            display: flex;
            gap: 15px;
            font-size: 16px;
            font-weight: bold;
            flex-wrap: wrap;
            justify-content: center;
        }
        .stat {
            background: #16213e;
            padding: 8px 15px;
            border-radius: 5px;
            border: 2px solid #00ff88;
        }
        #instructions {
            margin-top: 15px;
            text-align: center;
            color: #aaa;
            font-size: 14px;
            padding: 0 10px;
        }
        #mobileControls {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            display: none;
            justify-content: space-between;
            padding: 0 20px;
            pointer-events: none;
        }
        .controlGroup {
            display: flex;
            gap: 10px;
            pointer-events: all;
        }
        .mobileBtn {
            width: 60px;
            height: 60px;
            background: rgba(0, 255, 136, 0.3);
            border: 3px solid #00ff88;
            border-radius: 10px;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            touch-action: manipulation;
        }
        .mobileBtn:active {
            background: rgba(0, 255, 136, 0.6);
            transform: scale(0.95);
        }
        .mobileBtn.jump {
            width: 80px;
            height: 80px;
            background: rgba(255, 215, 0, 0.3);
            border-color: #FFD700;
        }
        .mobileBtn.jump:active {
            background: rgba(255, 215, 0, 0.6);
        }
        .mobileBtn.attack {
            width: 80px;
            height: 80px;
            background: rgba(255, 0, 0, 0.3);
            border-color: #ff0000;
        }
        .mobileBtn.attack:active {
            background: rgba(255, 0, 0, 0.6);
        }
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            h1 {
                font-size: 24px;
                margin: 10px 0;
            }
            #mobileControls {
                display: flex;
            }
            #instructions {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <h1>PIXEL SLAYER</h1>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <div id="ui">
        <div class="stat">Orcs: <span id="score">0</span></div>
        <div class="stat">Level: <span id="level">1</span></div>
        <div class="stat">Swords: <span id="swords">0</span></div>
        <div class="stat">Axes: <span id="axes">0</span></div>
        <div class="stat">Health: <span id="health">100</span></div>
    </div>
    <div id="instructions">
        ARROW KEYS to move - SPACE to attack - R to restart - P to pause
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const game = {
            score: 0,
            swords: 0,
            axes: 0,
            health: 100,
            running: false,
            started: false,
            paused: false,
            level: 1,
            maxLevel: 3,
            orcsPerLevel: 10,
            gameWon: false,
            bossSpawned: false
        };

        const player = {
            x: 100,
            y: 300,
            width: 30,
            height: 40,
            speed: 5,
            velocityY: 0,
            jumping: false,
            attacking: false,
            attackTimer: 0,
            facing: 1
        };

        const keys = {};
        const orcs = [];
        let orcSpawnTimer = 0;
        const weapons = [];
        const bloodDrops = [];
        const victoryDrops = [];
        let showVictoryRain = false;
        let victoryRainTimer = 0;
        const ground = canvas.height - 50;
        
        const mobileControls = {
            left: false,
            right: false,
            jump: false,
            attack: false
        };

        document.addEventListener('keydown', function(e) {
            keys[e.code] = true;
            
            if (e.code === 'Space') {
                if (!game.started) {
                    game.started = true;
                    game.running = true;
                } else if (!player.attacking && game.running && !game.paused) {
                    player.attacking = true;
                    player.attackTimer = 15;
                }
                e.preventDefault();
            }
            
            if (e.code === 'KeyP' && game.started) {
                game.paused = !game.paused;
            }
            
            if (e.code === 'KeyR') {
                location.reload();
            }
        });

        document.addEventListener('keyup', function(e) {
            keys[e.code] = false;
        });

        function setupMobileControls() {
            const leftBtn = document.getElementById('leftBtn');
            const rightBtn = document.getElementById('rightBtn');
            const jumpBtn = document.getElementById('jumpBtn');
            const attackBtn = document.getElementById('attackBtn');

            if (!leftBtn || !rightBtn || !jumpBtn || !attackBtn) return;

            leftBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                mobileControls.left = true;
            });
            leftBtn.addEventListener('touchend', function(e) {
                e.preventDefault();
                mobileControls.left = false;
            });

            rightBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                mobileControls.right = true;
            });
            rightBtn.addEventListener('touchend', function(e) {
                e.preventDefault();
                mobileControls.right = false;
            });

            jumpBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (!game.started) {
                    game.started = true;
                    game.running = true;
                } else if (!player.jumping && game.running && !game.paused) {
                    player.velocityY = -12;
                    player.jumping = true;
                }
            });

            attackBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (!game.started) {
                    game.started = true;
                    game.running = true;
                } else if (!player.attacking && game.running && !game.paused) {
                    player.attacking = true;
                    player.attackTimer = 15;
                }
            });
        }

        window.addEventListener('load', function() {
            setupMobileControls();
            gameLoop();
        });

        function spawnOrc() {
            const sizeMultiplier = 1 + (game.level - 1) * 0.25;
            orcs.push({
                x: canvas.width + 50,
                y: ground - (40 * sizeMultiplier),
                width: 40 * sizeMultiplier,
                height: 40 * sizeMultiplier,
                speed: 2 + Math.random(),
                health: 2,
                level: game.level,
                isBoss: false
            });
        }

        function spawnBoss() {
            const bossSize = 2.5;
            orcs.push({
                x: canvas.width + 50,
                y: ground - (40 * bossSize),
                width: 40 * bossSize,
                height: 40 * bossSize,
                speed: 1.5,
                health: 3,
                maxHealth: 3,
                level: game.level,
                isBoss: true
            });
            game.bossSpawned = true;
        }

        function spawnWeapon(x, y) {
            const type = Math.random() > 0.5 ? 'sword' : 'axe';
            weapons.push({
                x: x,
                y: y,
                type: type,
                velocityY: -5,
                gravity: 0.3
            });
        }

        function createBloodSplatter(x, y) {
            for (let i = 0; i < 12; i++) {
                bloodDrops.push({
                    x: x,
                    y: y,
                    velocityX: (Math.random() - 0.5) * 8,
                    velocityY: -Math.random() * 5 - 2,
                    gravity: 0.4,
                    life: 60
                });
            }
        }

        function createVictoryRain() {
            showVictoryRain = true;
            victoryRainTimer = 200;
            for (let i = 0; i < 150; i++) {
                victoryDrops.push({
                    x: Math.random() * canvas.width,
                    y: -Math.random() * canvas.height * 2,
                    velocityY: Math.random() * 4 + 3,
                    size: Math.random() * 4 + 2
                });
            }
        }

        function drawPlayer() {
            ctx.fillStyle = '#8b7355';
            ctx.fillRect(player.x + 8, player.y + 28, 6, 12);
            ctx.fillRect(player.x + 16, player.y + 28, 6, 12);
            
            ctx.fillStyle = '#2a2a2a';
            ctx.fillRect(player.x + 5, player.y + 5, 20, 25);
            
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(player.x + 6, player.y + 6, 18, 3);
            ctx.fillRect(player.x + 7, player.y + 12, 16, 2);
            ctx.fillRect(player.x + 8, player.y + 18, 14, 2);
            
            ctx.fillStyle = '#3a3a3a';
            ctx.fillRect(player.x + 2, player.y + 3, 7, 8);
            ctx.fillRect(player.x + 21, player.y + 3, 7, 8);
            
            ctx.fillStyle = '#555555';
            ctx.fillRect(player.x, player.y + 2, 3, 3);
            ctx.fillRect(player.x + 27, player.y + 2, 3, 3);
            
            ctx.fillStyle = '#666666';
            ctx.fillRect(player.x + 13, player.y + 8, 4, 3);
            
            ctx.fillStyle = '#ffaa88';
            ctx.fillRect(player.x + 8, player.y - 10, 14, 12);
            
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(player.x + 6, player.y - 15, 18, 8);
            
            ctx.fillStyle = '#000';
            ctx.fillRect(player.x + 9, player.y - 11, 12, 3);
            
            ctx.fillStyle = '#3a3a3a';
            ctx.fillRect(player.x + 7, player.y - 14, 3, 2);
            
            ctx.fillStyle = '#666666';
            ctx.fillRect(player.x + 5, player.y - 16, 2, 3);
            ctx.fillRect(player.x + 23, player.y - 16, 2, 3);
            
            ctx.fillStyle = '#8b0000';
            ctx.fillRect(player.x + 13, player.y - 18, 4, 4);
            ctx.fillRect(player.x + 14, player.y - 20, 2, 3);

            if (player.attacking) {
                const swordX = player.x + (player.facing > 0 ? player.width : -45);
                const swordY = player.y + 8;
                
                ctx.fillStyle = '#7a7a7a';
                ctx.fillRect(swordX, swordY, 40, 8);
                
                ctx.fillStyle = '#c0c0c0';
                ctx.fillRect(swordX, swordY + 1, 40, 2);
                
                ctx.fillStyle = '#a0a0a0';
                ctx.beginPath();
                ctx.moveTo(swordX + 40, swordY);
                ctx.lineTo(swordX + 48, swordY + 4);
                ctx.lineTo(swordX + 40, swordY + 8);
                ctx.fill();
                
                ctx.fillStyle = '#4a3a2a';
                ctx.fillRect(swordX - 3, swordY - 4, 6, 16);
                
                ctx.fillStyle = '#6a5a4a';
                ctx.fillRect(swordX - 2, swordY - 3, 4, 2);
                ctx.fillRect(swordX - 2, swordY + 9, 4, 2);
                
                ctx.fillStyle = '#3a2a1a';
                ctx.fillRect(swordX - 12, swordY + 1, 10, 6);
                
                ctx.fillStyle = '#2a1a0a';
                ctx.fillRect(swordX - 10, swordY + 2, 1, 4);
                ctx.fillRect(swordX - 7, swordY + 2, 1, 4);
                ctx.fillRect(swordX - 4, swordY + 2, 1, 4);
                
                ctx.fillStyle = '#5a4a3a';
                ctx.fillRect(swordX - 15, swordY, 4, 8);
                
                ctx.fillStyle = 'rgba(200, 200, 255, 0.4)';
                ctx.fillRect(swordX + 2, swordY - 2, 44, 12);
            }
        }

        function drawOrc(orc) {
            let bodyColor, headColor;
            if (orc.level === 1) {
                bodyColor = '#2d5016';
                headColor = '#4a7c2c';
            } else if (orc.level === 2) {
                bodyColor = '#5a1a3a';
                headColor = '#8a2a5a';
            } else {
                bodyColor = '#1a2a5a';
                headColor = '#2a4a8a';
            }
            
            if (orc.isBoss) {
                bodyColor = '#3a0a0a';
                headColor = '#5a1a1a';
            }
            
            ctx.fillStyle = bodyColor;
            ctx.fillRect(orc.x, orc.y, orc.width, orc.height);
            
            ctx.fillStyle = headColor;
            const headWidth = orc.width * 0.6;
            const headHeight = orc.height * 0.45;
            ctx.fillRect(orc.x + orc.width * 0.2, orc.y - headHeight, headWidth, headHeight);
            
            ctx.fillStyle = orc.isBoss ? '#FF8800' : '#FFD700';
            const hornHeight = orc.height * (orc.isBoss ? 0.7 : 0.6);
            ctx.beginPath();
            ctx.moveTo(orc.x + orc.width * 0.22, orc.y - headHeight);
            ctx.lineTo(orc.x + orc.width * 0.12, orc.y - headHeight - hornHeight);
            ctx.lineTo(orc.x + orc.width * 0.34, orc.y - headHeight);
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(orc.x + orc.width * 0.66, orc.y - headHeight);
            ctx.lineTo(orc.x + orc.width * 0.88, orc.y - headHeight - hornHeight);
            ctx.lineTo(orc.x + orc.width * 0.78, orc.y - headHeight);
            ctx.fill();
            
            ctx.fillStyle = orc.isBoss ? '#DD6600' : '#FFAA00';
            ctx.beginPath();
            ctx.moveTo(orc.x + orc.width * 0.25, orc.y - headHeight);
            ctx.lineTo(orc.x + orc.width * 0.16, orc.y - headHeight - hornHeight * 0.85);
            ctx.lineTo(orc.x + orc.width * 0.30, orc.y - headHeight);
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(orc.x + orc.width * 0.70, orc.y - headHeight);
            ctx.lineTo(orc.x + orc.width * 0.84, orc.y - headHeight - hornHeight * 0.85);
            ctx.lineTo(orc.x + orc.width * 0.75, orc.y - headHeight);
            ctx.fill();
            
            ctx.fillStyle = '#ffffff';
            const mouthY = orc.y - headHeight * 0.3;
            const mouthWidth = orc.width * 0.3;
            ctx.fillRect(orc.x + orc.width * 0.35, mouthY, mouthWidth, headHeight * 0.15);
            
            ctx.fillStyle = '#000';
            const fangSize = orc.width * 0.06;
            ctx.beginPath();
            ctx.moveTo(orc.x + orc.width * 0.38, mouthY);
            ctx.lineTo(orc.x + orc.width * 0.38 + fangSize, mouthY);
            ctx.lineTo(orc.x + orc.width * 0.38 + fangSize / 2, mouthY + fangSize * 1.5);
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(orc.x + orc.width * 0.58, mouthY);
            ctx.lineTo(orc.x + orc.width * 0.58 + fangSize, mouthY);
            ctx.lineTo(orc.x + orc.width * 0.58 + fangSize / 2, mouthY + fangSize * 1.5);
            ctx.fill();
            
            ctx.fillStyle = '#ff0000';
            const eyeSize = orc.width * 0.12;
            ctx.fillRect(orc.x + orc.width * 0.3, orc.y - headHeight * 0.7, eyeSize, eyeSize);
            ctx.fillRect(orc.x + orc.width * 0.55, orc.y - headHeight * 0.7, eyeSize, eyeSize);
            
            ctx.fillStyle = '#ff6666';
            const glowSize = eyeSize * 0.5;
            ctx.fillRect(orc.x + orc.width * 0.32, orc.y - headHeight * 0.68, glowSize, glowSize);
            ctx.fillRect(orc.x + orc.width * 0.57, orc.y - headHeight * 0.68, glowSize, glowSize);
            
            if (orc.isBoss) {
                ctx.fillStyle = '#ff0000';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('BOSS', orc.x + orc.width / 2, orc.y - headHeight - hornHeight - 5);
                
                ctx.fillStyle = '#555';
                ctx.fillRect(orc.x, orc.y - headHeight - hornHeight - 20, orc.width, 8);
                ctx.fillStyle = '#ff0000';
                const healthPercent = orc.health / orc.maxHealth;
                ctx.fillRect(orc.x, orc.y - headHeight - hornHeight - 20, orc.width * healthPercent, 8);
            }
        }

        function drawWeapon(weapon) {
            if (weapon.type === 'sword') {
                ctx.fillStyle = '#c0c0c0';
                ctx.fillRect(weapon.x, weapon.y, 8, 20);
                ctx.fillStyle = '#8b4513';
                ctx.fillRect(weapon.x + 1, weapon.y + 15, 6, 8);
            } else {
                ctx.fillStyle = '#8b4513';
                ctx.fillRect(weapon.x + 3, weapon.y + 10, 4, 15);
                ctx.fillStyle = '#666';
                ctx.beginPath();
                ctx.moveTo(weapon.x, weapon.y + 5);
                ctx.lineTo(weapon.x + 15, weapon.y + 5);
                ctx.lineTo(weapon.x + 7, weapon.y + 15);
                ctx.closePath();
                ctx.fill();
            }
        }

        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        function update() {
            if (!game.running || game.paused) return;

            if (keys['ArrowLeft'] || mobileControls.left) {
                player.x -= player.speed;
                player.facing = -1;
            }
            if (keys['ArrowRight'] || mobileControls.right) {
                player.x += player.speed;
                player.facing = 1;
            }
            if ((keys['ArrowUp'] || mobileControls.jump) && !player.jumping) {
                player.velocityY = -12;
                player.jumping = true;
            }

            player.velocityY += 0.5;
            player.y += player.velocityY;

            if (player.y >= ground - player.height) {
                player.y = ground - player.height;
                player.velocityY = 0;
                player.jumping = false;
            }

            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));

            if (player.attackTimer > 0) {
                player.attackTimer--;
                if (player.attackTimer === 0) {
                    player.attacking = false;
                }
            }

            orcSpawnTimer++;
            if (orcSpawnTimer > 120 && !game.bossSpawned) {
                if (game.score >= game.orcsPerLevel * game.level - 1 && orcs.length === 0) {
                    spawnBoss();
                } else {
                    spawnOrc();
                }
                orcSpawnTimer = 0;
            }

            for (let i = orcs.length - 1; i >= 0; i--) {
                const orc = orcs[i];
                orc.x -= orc.speed;

                if (checkCollision(player, orc)) {
                    game.health -= (orc.isBoss ? 1 : 0.5);
                    if (game.health <= 0) {
                        game.running = false;
                        alert('Game Over! Score: ' + game.score);
                        location.reload();
                    }
                }

                if (player.attacking && checkCollision(
                    {x: player.x + (player.facing > 0 ? player.width : -48), y: player.y + 8, width: 48, height: 12},
                    orc
                )) {
                    orc.health--;
                    createBloodSplatter(orc.x + orc.width / 2, orc.y + orc.height / 2);
                    
                    if (orc.health <= 0) {
                        game.score++;
                        spawnWeapon(orc.x + orc.width / 2, orc.y);
                        orcs.splice(i, 1);
                        
                        if (orc.isBoss) {
                            game.bossSpawned = false;
                        }
                        
                        if (game.score >= game.orcsPerLevel * game.level) {
                            if (game.level < game.maxLevel) {
                                game.level++;
                                game.bossSpawned = false;
                                createVictoryRain();
                                setTimeout(function() {
                                    alert('Level ' + game.level + '! Orcs are getting bigger!');
                                }, 100);
                            } else {
                                game.running = false;
                                game.gameWon = true;
                                createVictoryRain();
                            }
                        }
                    }
                }

                if (orc.x < -150) {
                    orcs.splice(i, 1);
                    if (orc.isBoss) {
                        game.bossSpawned = false;
                    }
                }
            }

            for (let i = weapons.length - 1; i >= 0; i--) {
                const weapon = weapons[i];
                weapon.velocityY += weapon.gravity;
                weapon.y += weapon.velocityY;

                if (weapon.y > ground - 20) {
                    weapon.y = ground - 20;
                    weapon.velocityY = 0;
                }

                if (checkCollision(player, {x: weapon.x, y: weapon.y, width: 15, height: 20})) {
                    if (weapon.type === 'sword') {
                        game.swords++;
                    } else {
                        game.axes++;
                    }
                    weapons.splice(i, 1);
                }
            }

            for (let i = bloodDrops.length - 1; i >= 0; i--) {
                const drop = bloodDrops[i];
                drop.velocityY += drop.gravity;
                drop.x += drop.velocityX;
                drop.y += drop.velocityY;
                drop.life--;
                
                if (drop.life <= 0 || drop.y > canvas.height) {
                    bloodDrops.splice(i, 1);
                }
            }

            if (showVictoryRain) {
                victoryRainTimer--;
                if (victoryRainTimer <= 0) {
                    showVictoryRain = false;
                    victoryDrops.length = 0;
                }
                
                for (let i = 0; i < victoryDrops.length; i++) {
                    const drop = victoryDrops[i];
                    drop.y += drop.velocityY;
                    
                    if (drop.y > canvas.height) {
                        drop.y = -10;
                        drop.x = Math.random() * canvas.width;
                    }
                }
            }

            document.getElementById('score').textContent = game.score;
            document.getElementById('level').textContent = game.level;
            document.getElementById('swords').textContent = game.swords;
            document.getElementById('axes').textContent = game.axes;
            document.getElementById('health').textContent = Math.max(0, Math.floor(game.health));
        }

        function draw() {
            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#ffffff';
            for (let i = 0; i < 50; i++) {
                const starX = (i * 47 + Date.now() * 0.01) % canvas.width;
                const starY = (i * 67) % (canvas.height - 100);
                ctx.fillRect(starX, starY, 2, 2);
            }
            
            ctx.fillStyle = '#4a2a6a';
            ctx.beginPath();
            ctx.arc(650, 80, 30, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#6a4a3a';
            ctx.beginPath();
            ctx.arc(150, 120, 20, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#3d3d5c';
            ctx.fillRect(0, ground, canvas.width, canvas.height - ground);
            
            ctx.strokeStyle = '#2a2a4a';
            ctx.lineWidth = 2;
            for (let y = ground; y < canvas.height; y += 20) {
                for (let x = 0; x < canvas.width; x += 40) {
                    ctx.strokeRect(x, y, 40, 20);
                }
            }
            
            const windowPositions = [
                {x: 100, y: ground - 120},
                {x: 300, y: ground - 150},
                {x: 500, y: ground - 100},
                {x: 650, y: ground - 140}
            ];
            
            for (let p = 0; p < windowPositions.length; p++) {
                const pos = windowPositions[p];
                ctx.fillStyle = '#2a2a3a';
                ctx.fillRect(pos.x - 5, pos.y - 5, 60, 80);
                
                ctx.fillStyle = '#0a0a1a';
                ctx.fillRect(pos.x, pos.y, 50, 70);
                
                ctx.fillStyle = '#ffffff';
                for (let i = 0; i < 8; i++) {
                    const sx = pos.x + (i * 13) % 45 + 2;
                    const sy = pos.y + (i * 17) % 65 + 2;
                    ctx.fillRect(sx, sy, 1, 1);
                }
                
                ctx.fillStyle = '#1a1a2a';
                ctx.fillRect(pos.x, pos.y + 33, 50, 4);
                ctx.fillRect(pos.x + 23, pos.y, 4, 70);
            }

            if (showVictoryRain) {
                for (let i = 0; i < victoryDrops.length; i++) {
                    const drop = victoryDrops[i];
                    ctx.fillStyle = '#dd0000';
                    ctx.fillRect(drop.x, drop.y, drop.size, drop.size * 2.5);
                    ctx.fillStyle = '#ff3333';
                    ctx.fillRect(drop.x + 1, drop.y + 1, Math.max(1, drop.size - 2), drop.size * 1.5);
                }
            }

            for (let i = 0; i < weapons.length; i++) {
                drawWeapon(weapons[i]);
            }

            for (let i = 0; i < orcs.length; i++) {
                drawOrc(orcs[i]);
            }

            drawPlayer();

            for (let i = 0; i < bloodDrops.length; i++) {
                const drop = bloodDrops[i];
                const opacity = drop.life / 60;
                ctx.fillStyle = 'rgba(200, 0, 0, ' + opacity + ')';
                ctx.fillRect(drop.x, drop.y, 5, 5);
                ctx.fillStyle = 'rgba(139, 0, 0, ' + opacity + ')';
                ctx.fillRect(drop.x + 1, drop.y + 1, 3, 3);
            }

            let weaponX = 10;
            for (let i = 0; i < game.swords; i++) {
                ctx.fillStyle = '#c0c0c0';
                ctx.fillRect(weaponX, 10, 3, 10);
                weaponX += 6;
            }
            weaponX = 10;
            for (let i = 0; i < game.axes; i++) {
                ctx.fillStyle = '#666';
                ctx.fillRect(weaponX, 25, 5, 5);
                weaponX += 8;
            }
            
            if (game.paused) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#FFD700';
                ctx.font = 'bold 50px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2);
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '20px Arial';
                ctx.fillText('Press P to Resume', canvas.width / 2, canvas.height / 2 + 50);
            }
            
            if (game.gameWon) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.85)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#FFD700';
                ctx.font = 'bold 60px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('YOU ARE THE', canvas.width / 2, canvas.height / 2 - 60);
                ctx.fillText('PIXEL SLAYER!', canvas.width / 2, canvas.height / 2);
                
                ctx.fillStyle = '#00ff88';
                ctx.font = 'bold 24px Arial';
                ctx.fillText('All 3 Levels Completed!', canvas.width / 2, canvas.height / 2 + 60);
                ctx.fillText('Total Orcs Defeated: ' + game.score, canvas.width / 2, canvas.height / 2 + 95);
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '20px Arial';
                ctx.fillText('Press R to Restart', canvas.width / 2, canvas.height / 2 + 135);
            }
            
            if (!game.started) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.85)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#FFD700';
                ctx.font = 'bold 50px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('PIXEL SLAYER', canvas.width / 2, canvas.height / 2 - 40);
                
                ctx.fillStyle = '#00ff88';
                ctx.font = 'bold 28px Arial';
                ctx.fillText('Press SPACE to Start', canvas.width / 2, canvas.height / 2 + 40);
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '18px Arial';
                ctx.fillText('Defeat 10 orcs per level - 3 Levels Total', canvas.width / 2, canvas.height / 2 + 85);
                ctx.fillText('Face the BOSS at the end of each level!', canvas.width / 2, canvas.height / 2 + 110);
            }
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>
